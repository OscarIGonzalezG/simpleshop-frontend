<div class="min-h-screen bg-neutral-950 flex flex-col justify-center items-center p-4 relative overflow-hidden">
  
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,var(--tw-gradient-stops))] from-brand-primary/10 via-neutral-950 to-neutral-950 pointer-events-none"></div>

  <div class="fixed top-5 right-5 z-50 transition-all duration-500 transform"
       [class.translate-x-0]="showToast()"
       [class.translate-x-full]="!showToast()"
       [class.opacity-100]="showToast()"
       [class.opacity-0]="!showToast()">
    
    @if (errorMessage()) {
      <div class="flex items-center gap-3 bg-neutral-900 border-l-4 border-red-500 text-white px-6 py-4 rounded shadow-2xl min-w-[300px]">
        <div class="text-red-500">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        </div>
        <div>
          <h4 class="font-bold text-sm text-red-500">Atención</h4>
          <p class="text-sm text-white/80">{{ errorMessage() }}</p>
        </div>
      </div>
    }

    @if (successMessage()) {
      <div class="flex items-center gap-3 bg-neutral-900 border-l-4 border-brand-primary text-white px-6 py-4 rounded shadow-2xl min-w-[300px]">
        <div class="text-brand-primary">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
        </div>
        <div>
          <h4 class="font-bold text-sm text-brand-primary">¡Éxito!</h4>
          <p class="text-sm text-white/80">{{ successMessage() }}</p>
        </div>
      </div>
    }
  </div>

  <div class="w-full max-w-md bg-neutral-900 border border-white/10 rounded-2xl p-8 shadow-2xl relative z-10 animate-enter">
    
    <div class="w-16 h-16 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-6 text-brand-primary border border-brand-primary/20">
      <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
    </div>

    <h2 class="text-2xl font-bold text-white text-center mb-2">Verifica tu cuenta</h2>
    <p class="text-white/40 text-center text-sm mb-4">
      Hemos enviado un código de 6 dígitos a <br>
      <span class="text-brand-primary font-mono">{{ email() }}</span>
    </p>

    <div class="text-center mb-6 p-2 rounded bg-neutral-950/50 border border-white/5">
      <p class="text-xs text-white/50 uppercase tracking-wider mb-1">Tiempo restante</p>
      <p class="text-3xl font-mono font-bold transition-colors" 
         [class.text-red-500]="timeLeft() < 60" 
         [class.text-white]="timeLeft() >= 60">
        {{ displayTime() }}
      </p>
    </div>

    <div class="flex flex-col gap-4">
      <div>
        <label class="block text-xs font-bold text-white/40 uppercase tracking-widest mb-2">Código de Verificación</label>
        
        <input 
          type="text" 
          [ngModel]="code()" 
          (ngModelChange)="code.set($event)"
          (keyup.enter)="onVerify()"
          placeholder="123456" 
          maxlength="6"
          [disabled]="timeLeft() === 0"
          class="w-full bg-neutral-950 border border-white/10 rounded-lg px-4 py-3 text-center text-2xl tracking-[0.5em] font-mono text-white placeholder-white/10 focus:border-brand-primary focus:outline-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
          [class.border-red-500]="errorMessage() && !showToast()">
      </div>

      <button 
        (click)="onVerify()" 
        [disabled]="isLoading() || code().length < 6 || timeLeft() === 0"
        class="w-full bg-brand-primary hover:bg-brand-primary/90 text-black font-bold py-3 rounded-lg transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed mt-2">
        @if (isLoading()) {
          <span class="animate-pulse">Verificando...</span>
        } @else {
          Confirmar Cuenta
        }
      </button>

      <div class="text-center mt-4">
        @if (timeLeft() > 0) {
          <div class="text-xs text-white/40">
            ¿No recibiste el código? <br>
            
            <button 
              (click)="onResend()" 
              [disabled]="isResending() || resendCooldown() > 0"
              class="mt-2 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              [class.text-brand-primary]="resendCooldown() === 0"
              [class.hover:underline]="resendCooldown() === 0"
              [class.text-white/30]="resendCooldown() > 0">
              
              @if (isResending()) {
                Enviando...
              } @else if (resendCooldown() > 0) {
                Reenviar en {{ resendCooldown() }}s
              } @else {
                Reenviar Código
              }
            </button>
          </div>
        } @else {
          <p class="text-red-400 text-xs font-bold">
            Redirigiendo al registro...
          </p>
        }

        <div class="mt-4 border-t border-white/5 pt-4">
          <a routerLink="/auth/login" class="text-xs text-white/30 hover:text-white transition-colors cursor-pointer">
            ¿Volver al Login?
          </a>
        </div>
      </div>

    </div>
  </div>
</div>